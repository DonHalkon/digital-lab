<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <title>Add compound</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
        <script type="text/javascript" language="javascript" src="/js/jsme/jsme.nocache.js"></script>
        <script>
         //this function will be called after the JavaScriptApplet code has been loaded.
            function jsmeOnLoad() {
                 jsmeApplet = new JSApplet.JSME("jsme_container", "640px", "480px");
                 jsmeApplet.setNotifyStructuralChangeJSfunction("show_smiles");
            }

          	function show_smiles() {
	   	        var data = jsmeApplet.smiles();
		        document.getElementById("smiles_input").value = data;
	        }
        </script>
</head>

<body>
<div th:replace="fragments/header :: header"/>

<h1 class="col-sm-offset-1">Add New Compound</h1>

<div th:if="${message != null}" th:assert="${!#strings.isEmpty(message)}" class="alert alert-danger">
    <strong><span th:text="${message}">empty</span></strong>
</div>

<div layout:fragment="content" style="width:60%">
    <form action="#" method="post" th:object="${compound}" class="form-horizontal">

        <div class="row form-group">
            <label class="col-sm-2 control-label">CID:</label>
            <div class="col-sm-10">
                <input name="cid" th:field="*{cid}"/>
            </div>
        </div>

        <div class="row form-group">
            <label class="col-sm-2 control-label">SMILES:</label>
            <div class="col-sm-10">
                <textarea class="form-control" rows="3" th:field="*{smiles}" id="smiles_input"
                          readonly="true"></textarea>
            </div>
            <button name="action" value="find-by-smiles" class="btn btn-primary btn-sm col-sm-offset-10">Find in PubChem</button>
        </div>

        <div class="row form-group">
            <label class="col-sm-2 control-label">Short Name:</label>
            <div class="col-sm-10">
                <input name="name" th:field="*{shortName}"/>
            </div>
        </div>

        <div class="row form-group">
            <label class="col-sm-2 control-label">Molecular Formula:</label>
            <div class="col-sm-10">
                <input name="formula" th:field="*{formula}"/>
            </div>
        </div>

        <div class="row form-group">
            <label class="col-sm-2 control-label">IUPAC Name:</label>
            <div class="col-sm-10">
                <input name="IUPAC Name" th:field="*{iupacName}"/>
            </div>
        </div>

        <div id="jsme_container" class="col-sm-offset-5"></div>

        <button name="action" value="save" class="btn btn-success col-sm-offset-12">Save</button>

    </form>
    <a href="/reagents/main" class="btn">Back</a>
</div>
</body>
</html>