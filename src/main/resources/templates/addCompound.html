<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <title>Add compound</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" th:href="@{/bootstrap/css/bootstrap.min.css}"/>

    <th:block layout:fragment="script">
        <script type="text/javascript" language="javascript" src="/js/jsme/jsme.nocache.js"></script>

        <script>
         //this function will be called after the JavaScriptApplet code has been loaded.
            function jsmeOnLoad() {
                 jsmeApplet = new JSApplet.JSME("jsme_container", "640px", "480px");
                 jsmeApplet.setNotifyStructuralChangeJSfunction("show_smiles");
            }

          	function show_smiles() {
	   	        var data = jsmeApplet.smiles();
		        document.getElementById("smiles_input").value = data;

	        }


        </script>
    </th:block>
</head>

<body>
<div th:replace="fragments/header :: header"/>
<h2>Create New Compound</h2>

<div>
    <form action="#" method="post" th:object="${compound}">
        <table class="table table-bordered">
            <tbody>
            <tr>
                <th>CID:</th>
                <td><input name="cid" th:field="*{cid}"/></td>
            </tr>
            <tr>
                <!--<form action="find-by-smiles" th:object="${compound}" method="post">-->
                <!--<input type="hidden" th:field="${id}" />-->

                <th>SMILES:</th>
                <td>
                    <textarea class="form-control" rows="3" th:field="*{smiles}" id="smiles_input"
                              readonly="true"></textarea>
                    <button name="action" value="find-by-smiles" class="btn btn-success">Find</button>
                    <!--<input type="button" value="Transfer to editor" onClick="toEditor()"/>-->
                </td>

                <!--</form>-->
            </tr>
            <tr>
                <th>Short Name:</th>
                <td><input name="name" th:field="*{shortName}"/></td>
            </tr>
            <tr>
                <th>IUPAC Name:</th>
                <td><input name="IUPAC Name" th:field="*{iupacName}"/></td>
            </tr>
            <tr>
                <td colspan="2">
                    <button name="action" value="save" class="btn btn-success">Save</button>
                </td>
            </tr>
            </tbody>
        </table>

        <div id="jsme_container"></div>

    </form>
    <a href="/reagents/main" class="btn btn-success">Back</a>
</div>
</body>
</html>